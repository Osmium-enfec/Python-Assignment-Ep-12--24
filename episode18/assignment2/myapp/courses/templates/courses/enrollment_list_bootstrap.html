{% extends 'courses/base.html' %}

{% block title %}Enrollments{% endblock %}

{% block content %}
<h1 class="mb-4"><i class="fas fa-clipboard-list"></i> All Enrollments</h1>

<!-- TODO 4: Enrollment Data Table
     - Columns: Student, Course, Enrollment Date, Status
     - Sort by enrollment date descending
     - Status badge (active/completed)
     - Action buttons for view/delete
     - Pagination (bonus)
-->

{% if enrollments %}
<div class="table-responsive">
    <table class="table table-striped table-hover">
        <thead class="table-primary">
            <tr>
                <th><i class="fas fa-user"></i> Student</th>
                <th><i class="fas fa-book"></i> Course</th>
                <th><i class="fas fa-calendar"></i> Enrollment Date</th>
                <th><i class="fas fa-check-circle"></i> Status</th>
                <th><i class="fas fa-cogs"></i> Actions</th>
            </tr>
        </thead>
        <tbody>
            <!-- TODO 4a: Loop through enrollments
                 - Student name and roll number
                 - Course name
                 - Enrollment date formatted
                 - Status badge (could be hardcoded as 'Active' for now)
                 - View button for student/course
            -->
            {% for enrollment in enrollments %}
            <tr>
                <td>
                    <strong>{{ enrollment.student.name }}</strong>
                    <br>
                    <small class="text-muted">Roll: {{ enrollment.student.roll_no }}</small>
                </td>
                <td>{{ enrollment.course.name }}</td>
                <td>{{ enrollment.enrollment_date|date:"d-m-Y" }}</td>
                <td>
                    <span class="badge bg-success">
                        <i class="fas fa-check-circle"></i> Active
                    </span>
                </td>
                <td>
                    <a href="{% url 'student_detail' enrollment.student.id %}" class="btn btn-sm btn-info" title="View Student">
                        <i class="fas fa-user"></i>
                    </a>
                    <a href="{% url 'course_detail' enrollment.course.id %}" class="btn btn-sm btn-primary" title="View Course">
                        <i class="fas fa-book"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-info" role="alert">
    <i class="fas fa-inbox"></i> No enrollments found.
</div>
{% endif %}

{% endblock %}
